(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,a,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(7220)}])},7220:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return b}});var t=r(5893),s=r(7294),l=r(1664),n=r.n(l),i=r(10),d=r(6506);function o(e){let{value:a,onChange:r,onConfirm:l,onCancel:n,bodyPartName:i}=e,[d,o]=(0,s.useState)(a);return(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:n,role:"dialog","aria-modal":"true","aria-labelledby":"slider-title",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-sm w-full animate-slide-in",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("h2",{id:"slider-title",className:"text-lg font-bold mb-2",children:i}),(0,t.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Califica tu intensidad de dolor de 1 a 10"}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("input",{type:"range",min:"1",max:"10",value:d,onChange:e=>{let a=Number(e.target.value);o(a),r(a)},onKeyDown:e=>{"Escape"===e.key&&n()},className:"w-full mb-4","aria-label":"Pain intensity slider",autoFocus:!0}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-3xl font-bold ".concat(d<=3?"text-yellow-600":d<=6?"text-orange-600":d<=8?"text-red-600":"text-red-800"),children:d}),(0,t.jsx)("div",{className:"text-gray-600 text-sm",children:d<=3?"Leve":d<=6?"Moderado":d<=8?"Severo":"Muy Severo"})]}),(0,t.jsx)("div",{className:"flex-1 ml-4",children:(0,t.jsx)("div",{className:"w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-2xl",style:{backgroundColor:d<=3?"#fef3c7":d<=6?"#fb923c":"#ef4444",color:d<=3?"#92400e":"white"},children:d})})]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:n,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition font-medium","aria-label":"Cancelar",children:"Cancelar"}),(0,t.jsx)("button",{onClick:l,className:"flex-1 px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition font-medium","aria-label":"Confirmar nivel de dolor",children:"Confirmar"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-400 text-center mt-4",children:"Presiona ESC para cancelar"})]})})}function c(e){let{name:a,intensityLevel:r,isSelected:s,onClick:l}=e;return(0,t.jsx)("button",{onClick:l,className:"\n        px-3 py-2 rounded-lg text-sm font-medium transition-all duration-150\n        border-2 cursor-pointer whitespace-nowrap\n        ".concat(s?"ring-2 ring-blue-500 ring-offset-2":"","\n        ").concat(r?r?r<=3?"bg-pain-low text-gray-900 border-yellow-400":r<=6?"bg-pain-medium text-white border-orange-400":"bg-pain-high text-white border-red-400":"":"bg-white text-gray-700 border-gray-200 hover:border-gray-300","\n      "),"aria-pressed":s,title:r?"".concat(a,": Pain level ").concat(r,"/10"):"Select ".concat(a),children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{children:a}),r&&(0,t.jsxs)("span",{className:"font-bold",children:[r,"/10"]})]})})}var x=r(1725);function m(e){var a;let{location:r,painEntry:l,onBodyPartSelected:n}=e,[i,d]=(0,s.useState)(null),[m,b]=(0,s.useState)(5),u=("front"===r?x.p.frontDiagram:x.p.backDiagram).map(e=>x.p.parts[e]).filter(Boolean),g=e=>{let a=null==l?void 0:l.bodyPartEntries[e];d(e),b((null==a?void 0:a.intensityLevel)||5)};return(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"front"===r?"Vista Frontal":"Vista Trasera"}),(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 w-full mb-6",children:u.map(e=>{var a;return(0,t.jsx)(c,{id:e.id,name:e.abbreviation||e.anatomicalName,intensityLevel:null==l?void 0:null===(a=l.bodyPartEntries[e.id])||void 0===a?void 0:a.intensityLevel,isSelected:i===e.id,onClick:()=>g(e.id)},e.id)})}),i&&(0,t.jsx)(o,{value:m,onChange:b,onConfirm:()=>{i&&(n(i,m),d(null))},onCancel:()=>{d(null)},bodyPartName:(null===(a=x.p.parts[i])||void 0===a?void 0:a.anatomicalName)||"Body Part"})]})}function b(){let{getTodayEntry:e,recordPain:a,loading:l,error:o,clearError:c}=(0,i.T)(),[x,b]=(0,s.useState)("front"),[u,g]=(0,s.useState)(null),h=e(),f=(0,d.TS)(),p=(0,d._f)(f);return l?(0,t.jsx)("main",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Cargando rastreador de dolor..."})]})}):(0,t.jsx)("main",{className:"min-h-screen py-8",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-gray-800 mb-2",children:"Rastreador de Dolor Corporal"}),(0,t.jsxs)("p",{className:"text-gray-600",children:["Registrando dolor para ",(0,t.jsx)("span",{className:"font-semibold",children:p})]})]}),(o||u)&&(0,t.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3 animate-fade-in",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-red-800 mb-1",children:"Error"}),(0,t.jsx)("p",{className:"text-red-700 text-sm",children:o||u})]}),(0,t.jsx)("button",{onClick:()=>{g(null),c()},className:"text-red-600 hover:text-red-800 font-bold ml-2","aria-label":"Descartar error",children:"âœ•"})]}),(0,t.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-8",children:(0,t.jsx)("p",{className:"text-blue-900",children:"Haz clic en las partes del cuerpo para registrar tus niveles de dolor. Usa el deslizador para calificar la intensidad de 1 (leve) a 10 (severo)."})}),(0,t.jsxs)("div",{className:"flex gap-2 mb-8 border-b border-gray-300",children:[(0,t.jsx)("button",{onClick:()=>b("front"),className:"px-6 py-3 font-semibold transition ".concat("front"===x?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-800"),"aria-selected":"front"===x,role:"tab",children:"Vista Frontal"}),(0,t.jsx)("button",{onClick:()=>b("back"),className:"px-6 py-3 font-semibold transition ".concat("back"===x?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-800"),"aria-selected":"back"===x,role:"tab",children:"Vista Trasera"})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-8 mb-8",children:(0,t.jsx)(m,{location:x,painEntry:h||void 0,onBodyPartSelected:(e,r)=>{try{g(null),a(e,r)}catch(e){g(e instanceof Error?e.message:"Failed to record pain")}}})}),h&&Object.keys(h.bodyPartEntries).length>0&&(0,t.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 mb-8",children:[(0,t.jsxs)("h2",{className:"font-semibold text-green-900 mb-4",children:["Registros de Hoy: ",Object.keys(h.bodyPartEntries).length]}),(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2",children:Object.entries(h.bodyPartEntries).map(e=>{let[a,s]=e,l=r(1725).p.parts[a];return(0,t.jsxs)("div",{className:"p-3 rounded bg-white border border-green-200",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:(null==l?void 0:l.abbreviation)||(null==l?void 0:l.anatomicalName)}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[s.intensityLevel,"/10"]})]},a)})})]}),(0,t.jsxs)("div",{className:"flex gap-4 justify-center",children:[(0,t.jsx)(n(),{href:"/statistics",className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-semibold",children:"Ver Estad\xedsticas"}),(0,t.jsx)(n(),{href:"/history",className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition font-semibold",children:"Ver Historial"})]})]})})}}},function(e){e.O(0,[664,10,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);