"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[213],{9926:function(e,a,t){t.d(a,{e:function(){return n},m:function(){return c}});let r={neck_left_anterior:{id:"neck_left_anterior",anatomicalName:"Cuello Izquierdo - Anterior",abbreviation:"Cu.Izq.A",location:"front",side:"left",category:"neck"},neck_left_posterior:{id:"neck_left_posterior",anatomicalName:"Cuello Izquierdo - Posterior",abbreviation:"Cu.Izq.P",location:"back",side:"left",category:"neck"},neck_right_anterior:{id:"neck_right_anterior",anatomicalName:"Cuello Derecho - Anterior",abbreviation:"Cu.Der.A",location:"front",side:"right",category:"neck"},neck_right_posterior:{id:"neck_right_posterior",anatomicalName:"Cuello Derecho - Posterior",abbreviation:"Cu.Der.P",location:"back",side:"right",category:"neck"},shoulder_left_superior:{id:"shoulder_left_superior",anatomicalName:"Hombro Izquierdo - Superior",abbreviation:"Ho.Izq.S",location:"front",side:"left",category:"shoulders"},shoulder_left_inferior:{id:"shoulder_left_inferior",anatomicalName:"Hombro Izquierdo - Inferior",abbreviation:"Ho.Izq.I",location:"front",side:"left",category:"shoulders"},shoulder_right_superior:{id:"shoulder_right_superior",anatomicalName:"Hombro Derecho - Superior",abbreviation:"Ho.Der.S",location:"front",side:"right",category:"shoulders"},shoulder_right_inferior:{id:"shoulder_right_inferior",anatomicalName:"Hombro Derecho - Inferior",abbreviation:"Ho.Der.I",location:"front",side:"right",category:"shoulders"},arm_left_proximal:{id:"arm_left_proximal",anatomicalName:"Brazo Izquierdo - Proximal",abbreviation:"Br.Izq.P",location:"front",side:"left",category:"arms"},arm_left_distal:{id:"arm_left_distal",anatomicalName:"Brazo Izquierdo - Distal",abbreviation:"Br.Izq.D",location:"front",side:"left",category:"arms"},arm_right_proximal:{id:"arm_right_proximal",anatomicalName:"Brazo Derecho - Proximal",abbreviation:"Br.Der.P",location:"front",side:"right",category:"arms"},arm_right_distal:{id:"arm_right_distal",anatomicalName:"Brazo Derecho - Distal",abbreviation:"Br.Der.D",location:"front",side:"right",category:"arms"},forearm_left_anterolateral:{id:"forearm_left_anterolateral",anatomicalName:"Antebrazo Izquierdo - Anterolateral",abbreviation:"An.Izq.AL",location:"front",side:"left",category:"forearms"},forearm_left_posterolateral:{id:"forearm_left_posterolateral",anatomicalName:"Antebrazo Izquierdo - Posterolateral",abbreviation:"An.Izq.PL",location:"back",side:"left",category:"forearms"},forearm_right_anterolateral:{id:"forearm_right_anterolateral",anatomicalName:"Antebrazo Derecho - Anterolateral",abbreviation:"An.Der.AL",location:"front",side:"right",category:"forearms"},forearm_right_posterolateral:{id:"forearm_right_posterolateral",anatomicalName:"Antebrazo Derecho - Posterolateral",abbreviation:"An.Der.PL",location:"back",side:"right",category:"forearms"},hand_left_palma:{id:"hand_left_palma",anatomicalName:"Mano Izquierda - Palma",abbreviation:"Ma.Izq.Pl",location:"front",side:"left",category:"hands"},hand_left_dorso:{id:"hand_left_dorso",anatomicalName:"Mano Izquierda - Dorso",abbreviation:"Ma.Izq.D",location:"front",side:"left",category:"hands"},hand_right_palma:{id:"hand_right_palma",anatomicalName:"Mano Derecha - Palma",abbreviation:"Ma.Der.Pl",location:"front",side:"right",category:"hands"},hand_right_dorso:{id:"hand_right_dorso",anatomicalName:"Mano Derecha - Dorso",abbreviation:"Ma.Der.D",location:"front",side:"right",category:"hands"},dorsal_left_superior:{id:"dorsal_left_superior",anatomicalName:"Dorsales Izquierdo - Superior",abbreviation:"Do.Izq.S",location:"back",side:"left",category:"back"},dorsal_left_inferior:{id:"dorsal_left_inferior",anatomicalName:"Dorsales Izquierdo - Inferior",abbreviation:"Do.Izq.I",location:"back",side:"left",category:"back"},dorsal_right_superior:{id:"dorsal_right_superior",anatomicalName:"Dorsales Derecho - Superior",abbreviation:"Do.Der.S",location:"back",side:"right",category:"back"},dorsal_right_inferior:{id:"dorsal_right_inferior",anatomicalName:"Dorsales Derecho - Inferior",abbreviation:"Do.Der.I",location:"back",side:"right",category:"back"},lumbar_left_superior:{id:"lumbar_left_superior",anatomicalName:"Lumbares Izquierdo - Superior",abbreviation:"Lu.Izq.S",location:"back",side:"left",category:"lower_back"},lumbar_left_inferior:{id:"lumbar_left_inferior",anatomicalName:"Lumbares Izquierdo - Inferior",abbreviation:"Lu.Izq.I",location:"back",side:"left",category:"lower_back"},lumbar_right_superior:{id:"lumbar_right_superior",anatomicalName:"Lumbares Derecho - Superior",abbreviation:"Lu.Der.S",location:"back",side:"right",category:"lower_back"},lumbar_right_inferior:{id:"lumbar_right_inferior",anatomicalName:"Lumbares Derecho - Inferior",abbreviation:"Lu.Der.I",location:"back",side:"right",category:"lower_back"},sacroiliac_left_superior:{id:"sacroiliac_left_superior",anatomicalName:"Zona Sacroil\xedaca Izquierda - Superior",abbreviation:"ZS.Izq.S",location:"back",side:"left",category:"pelvis"},sacroiliac_left_inferior:{id:"sacroiliac_left_inferior",anatomicalName:"Zona Sacroil\xedaca Izquierda - Inferior",abbreviation:"ZS.Izq.I",location:"back",side:"left",category:"pelvis"},sacroiliac_right_superior:{id:"sacroiliac_right_superior",anatomicalName:"Zona Sacroil\xedaca Derecha - Superior",abbreviation:"ZS.Der.S",location:"back",side:"right",category:"pelvis"},sacroiliac_right_inferior:{id:"sacroiliac_right_inferior",anatomicalName:"Zona Sacroil\xedaca Derecha - Inferior",abbreviation:"ZS.Der.I",location:"back",side:"right",category:"pelvis"},gluteal_left_superior:{id:"gluteal_left_superior",anatomicalName:"Gl\xfateo Izquierdo - Superior",abbreviation:"Gl.Izq.S",location:"back",side:"left",category:"pelvis"},gluteal_left_inferior:{id:"gluteal_left_inferior",anatomicalName:"Gl\xfateo Izquierdo - Inferior",abbreviation:"Gl.Izq.I",location:"back",side:"left",category:"pelvis"},gluteal_right_superior:{id:"gluteal_right_superior",anatomicalName:"Gl\xfateo Derecho - Superior",abbreviation:"Gl.Der.S",location:"back",side:"right",category:"pelvis"},gluteal_right_inferior:{id:"gluteal_right_inferior",anatomicalName:"Gl\xfateo Derecho - Inferior",abbreviation:"Gl.Der.I",location:"back",side:"right",category:"pelvis"},groin_left_medial:{id:"groin_left_medial",anatomicalName:"Ingle Izquierda - Medial",abbreviation:"In.Izq.M",location:"front",side:"left",category:"pelvis"},groin_left_lateral:{id:"groin_left_lateral",anatomicalName:"Ingle Izquierda - Lateral",abbreviation:"In.Izq.L",location:"front",side:"left",category:"pelvis"},groin_right_medial:{id:"groin_right_medial",anatomicalName:"Ingle Derecha - Medial",abbreviation:"In.Der.M",location:"front",side:"right",category:"pelvis"},groin_right_lateral:{id:"groin_right_lateral",anatomicalName:"Ingle Derecha - Lateral",abbreviation:"In.Der.L",location:"front",side:"right",category:"pelvis"},thigh_left_anterior:{id:"thigh_left_anterior",anatomicalName:"Muslo Izquierdo - Anterior",abbreviation:"Mu.Izq.A",location:"front",side:"left",category:"thighs"},thigh_left_posterior:{id:"thigh_left_posterior",anatomicalName:"Muslo Izquierdo - Posterior",abbreviation:"Mu.Izq.P",location:"back",side:"left",category:"thighs"},thigh_right_anterior:{id:"thigh_right_anterior",anatomicalName:"Muslo Derecho - Anterior",abbreviation:"Mu.Der.A",location:"front",side:"right",category:"thighs"},thigh_right_posterior:{id:"thigh_right_posterior",anatomicalName:"Muslo Derecho - Posterior",abbreviation:"Mu.Der.P",location:"back",side:"right",category:"thighs"},knee_left_lateral:{id:"knee_left_lateral",anatomicalName:"Rodilla Izquierda - Lateral",abbreviation:"Ro.Izq.L",location:"front",side:"left",category:"knees"},knee_left_medial:{id:"knee_left_medial",anatomicalName:"Rodilla Izquierda - Medial",abbreviation:"Ro.Izq.M",location:"front",side:"left",category:"knees"},knee_right_lateral:{id:"knee_right_lateral",anatomicalName:"Rodilla Derecha - Lateral",abbreviation:"Ro.Der.L",location:"front",side:"right",category:"knees"},knee_right_medial:{id:"knee_right_medial",anatomicalName:"Rodilla Derecha - Medial",abbreviation:"Ro.Der.M",location:"front",side:"right",category:"knees"},shin_left_anterior:{id:"shin_left_anterior",anatomicalName:"Canilla Izquierda - Anterior",abbreviation:"Ca.Izq.A",location:"front",side:"left",category:"shins"},shin_left_posterior:{id:"shin_left_posterior",anatomicalName:"Pantorrilla Izquierda - Posterior",abbreviation:"Pa.Izq.P",location:"back",side:"left",category:"shins"},shin_right_anterior:{id:"shin_right_anterior",anatomicalName:"Canilla Derecha - Anterior",abbreviation:"Ca.Der.A",location:"front",side:"right",category:"shins"},shin_right_posterior:{id:"shin_right_posterior",anatomicalName:"Pantorrilla Derecha - Posterior",abbreviation:"Pa.Der.P",location:"back",side:"right",category:"shins"},ankle_left_anterolateral:{id:"ankle_left_anterolateral",anatomicalName:"Tobillo Izquierdo - Anterolateral",abbreviation:"To.Izq.AL",location:"front",side:"left",category:"feet"},ankle_left_posterolateral:{id:"ankle_left_posterolateral",anatomicalName:"Tobillo Izquierdo - Posterolateral",abbreviation:"To.Izq.PL",location:"back",side:"left",category:"feet"},ankle_right_anterolateral:{id:"ankle_right_anterolateral",anatomicalName:"Tobillo Derecho - Anterolateral",abbreviation:"To.Der.AL",location:"front",side:"right",category:"feet"},ankle_right_posterolateral:{id:"ankle_right_posterolateral",anatomicalName:"Tobillo Derecho - Posterolateral",abbreviation:"To.Der.PL",location:"back",side:"right",category:"feet"},foot_left_dorso:{id:"foot_left_dorso",anatomicalName:"Pie Izquierdo - Dorso",abbreviation:"Pi.Izq.D",location:"front",side:"left",category:"feet"},foot_left_planta:{id:"foot_left_planta",anatomicalName:"Pie Izquierdo - Planta",abbreviation:"Pi.Izq.Pl",location:"front",side:"left",category:"feet"},foot_right_dorso:{id:"foot_right_dorso",anatomicalName:"Pie Derecho - Dorso",abbreviation:"Pi.Der.D",location:"front",side:"right",category:"feet"},foot_right_planta:{id:"foot_right_planta",anatomicalName:"Pie Derecho - Planta",abbreviation:"Pi.Der.Pl",location:"front",side:"right",category:"feet"}},i=Object.values(r).filter(e=>"front"===e.location).map(e=>e.id),o=Object.values(r).filter(e=>"back"===e.location).map(e=>e.id),l=Array.from(new Set(Object.values(r).map(e=>e.category))),n={parts:r,frontDiagram:i,backDiagram:o,categories:l,version:"2.0"},c={neck:["anterior","posterior"],shoulder:["superior","inferior"],arm:["proximal","distal"],forearm:["anterolateral","posterolateral"],hand:["palma","dorso"],dorsal:["superior","inferior"],lumbar:["superior","inferior"],sacroiliac:["superior","inferior"],gluteal:["superior","inferior"],groin:["medial","lateral"],thigh:["anterior","posterior"],knee:["lateral","medial"],shin:["anterior","posterior"],ankle:["anterolateral","posterolateral"],foot:["dorso","planta"]}},1725:function(e,a,t){t.d(a,{p:function(){return r}});let r={parts:{head:{id:"head",anatomicalName:"Cabeza",location:"front",side:"center",category:"head"},neck:{id:"neck",anatomicalName:"Cuello",location:"front",side:"center",category:"neck"},left_shoulder:{id:"left_shoulder",anatomicalName:"Hombro Izquierdo",abbreviation:"Hombro Izq.",location:"front",side:"left",category:"shoulders"},right_shoulder:{id:"right_shoulder",anatomicalName:"Hombro Derecho",abbreviation:"Hombro Der.",location:"front",side:"right",category:"shoulders"},left_deltoid:{id:"left_deltoid",anatomicalName:"Deltoides Izquierdo",abbreviation:"Delt. Izq.",location:"front",side:"left",category:"shoulders"},right_deltoid:{id:"right_deltoid",anatomicalName:"Deltoides Derecho",abbreviation:"Delt. Der.",location:"front",side:"right",category:"shoulders"},left_bicep:{id:"left_bicep",anatomicalName:"B\xedceps Izquierdo",abbreviation:"B\xedceps Izq.",location:"front",side:"left",category:"arms"},right_bicep:{id:"right_bicep",anatomicalName:"B\xedceps Derecho",abbreviation:"B\xedceps Der.",location:"front",side:"right",category:"arms"},left_tricep:{id:"left_tricep",anatomicalName:"Tr\xedceps Izquierdo",abbreviation:"Tr\xedceps Izq.",location:"back",side:"left",category:"arms"},right_tricep:{id:"right_tricep",anatomicalName:"Tr\xedceps Derecho",abbreviation:"Tr\xedceps Der.",location:"back",side:"right",category:"arms"},left_forearm:{id:"left_forearm",anatomicalName:"Antebrazo Izquierdo",abbreviation:"Antebr. Izq.",location:"front",side:"left",category:"forearms"},right_forearm:{id:"right_forearm",anatomicalName:"Antebrazo Derecho",abbreviation:"Antebr. Der.",location:"front",side:"right",category:"forearms"},left_hand:{id:"left_hand",anatomicalName:"Mano Izquierda",abbreviation:"Mano Izq.",location:"front",side:"left",category:"hands"},right_hand:{id:"right_hand",anatomicalName:"Mano Derecha",abbreviation:"Mano Der.",location:"front",side:"right",category:"hands"},chest:{id:"chest",anatomicalName:"Pecho",location:"front",side:"center",category:"chest"},left_breast:{id:"left_breast",anatomicalName:"Seno Izquierdo",abbreviation:"Seno Izq.",location:"front",side:"left",category:"chest"},right_breast:{id:"right_breast",anatomicalName:"Seno Derecho",abbreviation:"Seno Der.",location:"front",side:"right",category:"chest"},abdomen:{id:"abdomen",anatomicalName:"Abdomen",location:"front",side:"center",category:"abdomen"},upper_back:{id:"upper_back",anatomicalName:"Espalda Superior",location:"back",side:"center",category:"back"},mid_back:{id:"mid_back",anatomicalName:"Espalda Media",location:"back",side:"center",category:"back"},lower_back:{id:"lower_back",anatomicalName:"Espalda Baja",location:"back",side:"center",category:"lower_back"},left_hip:{id:"left_hip",anatomicalName:"Cadera Izquierda",abbreviation:"Cadera Izq.",location:"front",side:"left",category:"pelvis"},right_hip:{id:"right_hip",anatomicalName:"Cadera Derecha",abbreviation:"Cadera Der.",location:"front",side:"right",category:"pelvis"},left_glute:{id:"left_glute",anatomicalName:"Gl\xfateo Izquierdo",abbreviation:"Gl\xfateo Izq.",location:"back",side:"left",category:"pelvis"},right_glute:{id:"right_glute",anatomicalName:"Gl\xfateo Derecho",abbreviation:"Gl\xfateo Der.",location:"back",side:"right",category:"pelvis"},left_thigh:{id:"left_thigh",anatomicalName:"Muslo Izquierdo",abbreviation:"Muslo Izq.",location:"front",side:"left",category:"thighs"},right_thigh:{id:"right_thigh",anatomicalName:"Muslo Derecho",abbreviation:"Muslo Der.",location:"front",side:"right",category:"thighs"},left_knee:{id:"left_knee",anatomicalName:"Rodilla Izquierda",abbreviation:"Rodilla Izq.",location:"front",side:"left",category:"knees"},right_knee:{id:"right_knee",anatomicalName:"Rodilla Derecha",abbreviation:"Rodilla Der.",location:"front",side:"right",category:"knees"},left_shin:{id:"left_shin",anatomicalName:"Tibia Izquierda",abbreviation:"Tibia Izq.",location:"front",side:"left",category:"shins"},right_shin:{id:"right_shin",anatomicalName:"Tibia Derecha",abbreviation:"Tibia Der.",location:"front",side:"right",category:"shins"},left_foot:{id:"left_foot",anatomicalName:"Pie Izquierdo",abbreviation:"Pie Izq.",location:"front",side:"left",category:"feet"},right_foot:{id:"right_foot",anatomicalName:"Pie Derecho",abbreviation:"Pie Der.",location:"front",side:"right",category:"feet"}},frontDiagram:["head","neck","left_shoulder","right_shoulder","left_deltoid","right_deltoid","left_bicep","right_bicep","left_forearm","right_forearm","left_hand","right_hand","chest","left_breast","right_breast","abdomen","left_hip","right_hip","left_thigh","right_thigh","left_knee","right_knee","left_shin","right_shin","left_foot","right_foot"],backDiagram:["neck","left_shoulder","right_shoulder","left_deltoid","right_deltoid","left_tricep","right_tricep","left_forearm","right_forearm","left_hand","right_hand","upper_back","mid_back","lower_back","left_glute","right_glute","left_thigh","right_thigh","left_knee","right_knee","left_shin","right_shin","left_foot","right_foot"],categories:["head","neck","shoulders","arms","forearms","hands","chest","abdomen","back","lower_back","pelvis","thighs","knees","shins","feet"],version:"1.0"}},6506:function(e,a,t){function r(){return i(new Date)}function i(e){let a=e.getFullYear(),t=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(a,"-").concat(t,"-").concat(r)}function o(e){let[a,t,r]=e.split("-").map(Number);return new Date(a,t-1,r)}function l(e){let a=new Date,t=new Date;return"week"===e?t.setDate(a.getDate()-6):t.setDate(a.getDate()-29),{startDate:i(t),endDate:i(a)}}function n(e,a){let t=[],r=o(e),l=o(a);for(;r<=l;)t.push(i(r)),r.setDate(r.getDate()+1);return t}function c(e){return o(e).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}t.d(a,{Ci:function(){return n},TS:function(){return r},_f:function(){return c},zG:function(){return l}})},9213:function(e,a,t){t.d(a,{T:function(){return f}});var r=t(7294),i=t(6506),o=t(1725),l=t(9926);function n(e){var a,t;return((a=e.bodyPartId)in o.p.parts||a in l.e.parts)&&Number.isInteger(t=e.intensityLevel)&&t>=1&&t<=10}let c="painTracker";function s(){try{let e=localStorage.getItem(c);if(!e)return{};return JSON.parse(e)}catch(e){return console.error("Failed to load pain tracker data:",e),{}}}function _(e){try{let a=JSON.stringify(e);localStorage.setItem(c,a)}catch(a){a instanceof DOMException&&22===a.code?function(e){let a=Object.keys(e).sort(),t=0,r=new Date(new Date);r.setMonth(r.getMonth()-1);let i=r.toISOString().split("T")[0];for(let r of a)r<i&&(delete e[r],t++);if(t>0)try{localStorage.setItem(c,JSON.stringify(e)),console.log("Automatically deleted ".concat(t," old entries to free up storage."))}catch(e){console.error("Failed to save after cleanup:",e)}}(e):console.error("Failed to save pain tracker data:",a)}}let d={left_neck:["neck_left_anterior","neck_left_posterior"],right_neck:["neck_right_anterior","neck_right_posterior"],left_shoulder:["shoulder_left_superior","shoulder_left_inferior"],right_shoulder:["shoulder_right_superior","shoulder_right_inferior"],left_deltoid:["shoulder_left_superior"],right_deltoid:["shoulder_right_superior"],left_bicep:["arm_left_proximal"],right_bicep:["arm_right_proximal"],left_tricep:["arm_left_proximal"],right_tricep:["arm_right_proximal"],left_forearm:["forearm_left_anterolateral","forearm_left_posterolateral"],right_forearm:["forearm_right_anterolateral","forearm_right_posterolateral"],left_hand:["hand_left_palma","hand_left_dorso"],right_hand:["hand_right_palma","hand_right_dorso"],left_upper_back:["dorsal_left_superior","dorsal_left_inferior"],right_upper_back:["dorsal_right_superior","dorsal_right_inferior"],left_lower_back:["lumbar_left_superior","lumbar_left_inferior"],right_lower_back:["lumbar_right_superior","lumbar_right_inferior"],left_sacroiliac:["sacroiliac_left_superior","sacroiliac_left_inferior"],right_sacroiliac:["sacroiliac_right_superior","sacroiliac_right_inferior"],left_gluteal:["gluteal_left_superior","gluteal_left_inferior"],right_gluteal:["gluteal_right_superior","gluteal_right_inferior"],left_groin:["groin_left_medial","groin_left_lateral"],right_groin:["groin_right_medial","groin_right_lateral"],left_thigh:["thigh_left_anterior","thigh_left_posterior"],right_thigh:["thigh_right_anterior","thigh_right_posterior"],left_knee:["knee_left_lateral","knee_left_medial"],right_knee:["knee_right_lateral","knee_right_medial"],left_shin:["shin_left_anterior","shin_left_posterior"],right_shin:["shin_right_anterior","shin_right_posterior"],left_ankle:["ankle_left_anterolateral","ankle_left_posterolateral"],right_ankle:["ankle_right_anterolateral","ankle_right_posterolateral"],left_foot:["foot_left_dorso","foot_left_planta"],right_foot:["foot_right_dorso","foot_right_planta"]};function h(e){var a;let t=Object.keys(e.bodyPartEntries);return(null===(a=e.metadata)||void 0===a?void 0:a.systemVersion)!=="refined-60"&&t.some(e=>e in d)}function f(){let[e,a]=(0,r.useState)({}),[t,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)(null),[f,g]=(0,r.useState)("pending"),[m,b]=(0,r.useState)(null);(0,r.useEffect)(()=>{try{let e=s();if(Object.values(e).some(e=>h(e))){try{let a,t,r,i;let o=(a=0,t=0,r=0,i=0,Object.values(e).forEach(e=>{h(e)?a++:t++,Object.keys(e.bodyPartEntries).forEach(e=>{r++;let a=d[e];a?i+=a.length:i+=1})}),{needsMigration:a>0,legacyEntryCount:a,modernEntryCount:t,totalRegions:r,estimatedNewRegions:i});b(o)}catch(e){console.warn("Failed to compute migration summary",e)}g("needs-migration")}else g("no-migration");a(e)}catch(e){c("Failed to load pain data"),console.error(e)}finally{o(!1)}},[]);let u=(0,r.useCallback)(()=>{try{let e=s(),t=JSON.stringify(e,null,2);sessionStorage.setItem("painDataBackup",t);let{migratedEntries:r,migrationType:i,stats:o}=function(e){let a={},t=[],r=0,i=0;Object.entries(e).forEach(e=>{let[o,l]=e;try{h(l)?(a[o]=function(e){let a={};return Object.entries(e.bodyPartEntries).forEach(e=>{let[t,r]=e,i=d[t];if(!i){console.warn("Unknown legacy region ID during migration: ".concat(t)),a[t]=r;return}i.forEach(e=>{a[e]={bodyPartId:e,intensityLevel:r.intensityLevel,recordedAt:r.recordedAt,notes:r.notes}})}),{date:e.date,bodyPartEntries:a,createdAt:e.createdAt,updatedAt:new Date().toISOString(),metadata:{...e.metadata,systemVersion:"refined-60",migratedAt:new Date().toISOString()}}}(l),r++):(a[o]=l,i++)}catch(e){t.push("Error migrating entry for ".concat(o,": ").concat(e instanceof Error?e.message:String(e))),a[o]=l,i++}});let o=Object.keys(e).length;return{migratedEntries:a,migrationType:0===r?"no-migration":r===o?"complete":"partial",stats:{totalEntries:o,migratedCount:r,skippedCount:i,errors:t}}}(e);console.log("✅ Migration complete: ".concat(i),o),_(r),a(r),g("no-migration"===i?"no-migration":"migrated")}catch(e){console.error("❌ Migration error:",e),g("error"),c("Migration failed: ".concat(e instanceof Error?e.message:"Unknown error"))}},[]),p=(0,r.useCallback)((e,t)=>{try{let r=function(e,a){var t,r;let o=s(),l=(0,i.TS)();o[l]||(o[l]={date:l,bodyPartEntries:{},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});let c={bodyPartId:e,intensityLevel:a,recordedAt:new Date().toISOString()};if(o[l].bodyPartEntries[e]=c,o[l].updatedAt=new Date().toISOString(),r=(t=o[l]).date,!(!(!/^\d{4}-\d{2}-\d{2}$/.test(r)||isNaN(new Date(r).getTime()))&&Object.values(t.bodyPartEntries).every(n)))throw Error("Invalid pain entry for ".concat(e));return _(o),o[l]}(e,t);return a(e=>({...e,[r.date]:r})),r}catch(e){throw c("Failed to record pain: ".concat(e instanceof Error?e.message:"Unknown error")),e}},[]),k=(0,r.useCallback)((e,t,r)=>{try{let i=function(e,a,t){let r=s();if(!r[e])throw Error("No entry found for date ".concat(e));let i={bodyPartId:a,intensityLevel:t,recordedAt:new Date().toISOString()};if(!n(i))throw Error("Invalid body part entry");return r[e].bodyPartEntries[a]=i,r[e].updatedAt=new Date().toISOString(),_(r),r[e]}(e,t,r);return a(a=>({...a,[e]:i})),i}catch(e){throw c("Failed to update pain: ".concat(e instanceof Error?e.message:"Unknown error")),e}},[]),y=(0,r.useCallback)((e,t)=>{try{!function(e,a){let t=s();if(!t[e])throw Error("No entry found for date ".concat(e));delete t[e].bodyPartEntries[a],t[e].updatedAt=new Date().toISOString(),0===Object.keys(t[e].bodyPartEntries).length&&delete t[e],_(t),t[e]}(e,t),a(a=>{let r={...a};return r[e]&&(delete r[e].bodyPartEntries[t],0===Object.keys(r[e].bodyPartEntries).length?delete r[e]:r[e].updatedAt=new Date().toISOString()),r})}catch(e){throw c("Failed to remove pain: ".concat(e instanceof Error?e.message:"Unknown error")),e}},[]),D=(0,r.useCallback)(()=>e[(0,i.TS)()]||null,[e]),I=(0,r.useCallback)(a=>e[a]||null,[e]),v=(0,r.useCallback)(()=>Object.values(e).sort((e,a)=>new Date(a.date).getTime()-new Date(e.date).getTime()),[e]);return{entries:e,loading:t,error:l,migrationStatus:f,migrationSummary:m,performMigration:u,recordPain:p,updatePain:k,removePain:y,getTodayEntry:D,getEntryByDate:I,getAllEntries:v,clearError:()=>c(null),acknowledgeMigration:()=>g("no-migration")}}}}]);