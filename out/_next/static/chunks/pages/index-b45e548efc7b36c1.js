(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(9189)}])},9189:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return g}});var i=t(5893),l=t(7294),a=t(1664),s=t.n(a),d=t(9213),o=t(6506),n=t(9926);function c(e){let r=n.e.parts[e];return(null==r?void 0:r.anatomicalName)||e}function h(e){let{value:r,onChange:t,onConfirm:a,onCancel:s,bodyPartName:d,regionId:o}=e,[n,h]=(0,l.useState)(r),f=d||(o?c(o):"Regi\xf3n");return(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:s,role:"dialog","aria-modal":"true","aria-labelledby":"slider-title",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-sm w-full animate-slide-in",onClick:e=>e.stopPropagation(),children:[(0,i.jsx)("h2",{id:"slider-title",className:"text-lg font-bold mb-2",children:f}),(0,i.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Califica tu intensidad de dolor de 1 a 10"}),(0,i.jsxs)("div",{className:"mb-6",children:[(0,i.jsx)("input",{type:"range",min:"1",max:"10",value:n,onChange:e=>{let r=Number(e.target.value);h(r),t(r)},onKeyDown:e=>{"Escape"===e.key&&s()},className:"w-full mb-4","aria-label":"Pain intensity slider",autoFocus:!0}),(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"text-3xl font-bold ".concat(n<=3?"text-yellow-600":n<=6?"text-orange-600":n<=8?"text-red-600":"text-red-800"),children:n}),(0,i.jsx)("div",{className:"text-gray-600 text-sm",children:n<=3?"Leve":n<=6?"Moderado":n<=8?"Severo":"Muy Severo"})]}),(0,i.jsx)("div",{className:"flex-1 ml-4",children:(0,i.jsx)("div",{className:"w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-2xl",style:{backgroundColor:n<=3?"#fef3c7":n<=6?"#fb923c":"#ef4444",color:n<=3?"#92400e":"white"},children:n})})]})]}),(0,i.jsxs)("div",{className:"flex gap-3",children:[(0,i.jsx)("button",{onClick:s,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition font-medium","aria-label":"Cancelar",children:"Cancelar"}),(0,i.jsx)("button",{onClick:a,className:"flex-1 px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition font-medium","aria-label":"Confirmar nivel de dolor",children:"Confirmar"})]}),(0,i.jsx)("p",{className:"text-xs text-gray-400 text-center mt-4",children:"Presiona ESC para cancelar"})]})})}function f(e){let{primaryRegionId:r,language:t="es",subdivisions:l,onSelect:a,onCancel:s}=e;return(0,i.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",role:"dialog","aria-modal":"true",children:(0,i.jsxs)("div",{className:"w-full max-w-md rounded bg-white p-4 shadow-lg",children:[(0,i.jsxs)("header",{className:"mb-3 flex items-center justify-between",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold",children:"es"===t?"Seleccione subdivisi\xf3n":"Select subdivision"}),(0,i.jsx)("div",{className:"text-sm text-gray-500",children:r}),(0,i.jsx)("button",{"aria-label":"Cerrar",onClick:s,className:"text-sm text-gray-600",children:"\xd7"})]}),(0,i.jsx)("div",{className:"grid gap-2",children:l.map(e=>(0,i.jsx)("button",{onClick:()=>a(e.id),className:"w-full rounded border px-3 py-2 text-left hover:bg-gray-50","aria-label":e.labelEs,children:(0,i.jsx)("div",{className:"text-base font-medium",children:"es"===t?e.labelEs:e.labelEn||e.labelEs})},e.id))}),(0,i.jsx)("footer",{className:"mt-4 flex justify-end",children:(0,i.jsx)("button",{onClick:s,className:"rounded bg-gray-100 px-3 py-1 text-sm",children:"es"===t?"Cancelar":"Cancel"})})]})})}var x=t(1725);let u=[{id:"head",x:150,y:40,radius:25},{id:"neck",x:150,y:75,radius:15},{id:"left_shoulder",x:100,y:95,radius:18},{id:"right_shoulder",x:200,y:95,radius:18},{id:"left_deltoid",x:85,y:110,radius:16},{id:"right_deltoid",x:215,y:110,radius:16},{id:"chest",x:150,y:125,radius:25},{id:"left_bicep",x:65,y:135,radius:15},{id:"right_bicep",x:235,y:135,radius:15},{id:"abdomen",x:150,y:165,radius:28},{id:"left_forearm",x:50,y:165,radius:14},{id:"right_forearm",x:250,y:165,radius:14},{id:"left_hip",x:110,y:200,radius:18},{id:"right_hip",x:190,y:200,radius:18},{id:"left_hand",x:40,y:200,radius:12},{id:"right_hand",x:260,y:200,radius:12},{id:"left_thigh",x:110,y:260,radius:22},{id:"right_thigh",x:190,y:260,radius:22},{id:"left_knee",x:110,y:320,radius:16},{id:"right_knee",x:190,y:320,radius:16},{id:"left_shin",x:110,y:370,radius:14},{id:"right_shin",x:190,y:370,radius:14},{id:"left_foot",x:110,y:405,radius:12},{id:"right_foot",x:190,y:405,radius:12}],_=[{id:"neck",x:150,y:75,radius:15},{id:"left_shoulder",x:100,y:95,radius:18},{id:"right_shoulder",x:200,y:95,radius:18},{id:"left_deltoid",x:85,y:110,radius:16},{id:"right_deltoid",x:215,y:110,radius:16},{id:"upper_back",x:150,y:125,radius:25},{id:"left_tricep",x:65,y:135,radius:15},{id:"right_tricep",x:235,y:135,radius:15},{id:"mid_back",x:150,y:160,radius:25},{id:"left_forearm",x:50,y:165,radius:14},{id:"right_forearm",x:250,y:165,radius:14},{id:"lower_back",x:150,y:195,radius:28},{id:"left_glute",x:110,y:225,radius:20},{id:"right_glute",x:190,y:225,radius:20},{id:"left_thigh",x:110,y:275,radius:22},{id:"right_thigh",x:190,y:275,radius:22},{id:"left_shin",x:110,y:370,radius:14},{id:"right_shin",x:190,y:370,radius:14},{id:"left_foot",x:110,y:405,radius:12},{id:"right_foot",x:190,y:405,radius:12}];function m(e){let{location:r,painEntry:t,onBodyPartSelected:a}=e,[s,d]=(0,l.useState)(null),[o,c]=(0,l.useState)(5),[m,g]=(0,l.useState)(!1),[b,p]=(0,l.useState)([]),[y,j]=(0,l.useState)(null),k=e=>{var r;let i=x.p.parts[e],l=(null==i?void 0:i.side)||"left",a=function(e){let r=function(e){let r=e.split("_");if(r.length<3)return null;let t=r[r.length-2],i=r[r.length-1],l=r.slice(0,-2).join("_");return"left"!==t&&"right"!==t?null:{primaryRegion:l,side:t,subdivision:i}}(e);return(null==r?void 0:r.primaryRegion)||null}(e)||"";if(!a){let r=(null==i?void 0:i.category)||"";a=({shoulders:"shoulder",arms:"arm",forearms:"forearm",hands:"hand",back:"dorsal",lower_back:"lumbar",pelvis:"sacroiliac",thighs:"thigh",knees:"knee",shins:"shin",feet:"foot"})[r]||r||e.split("_").slice(1).join("_")}let s=(r=a,(n.m[r]||[]).map(e=>{var t;return t={primaryRegion:r,side:l,subdivision:e},"".concat(t.primaryRegion,"_").concat(t.side,"_").concat(t.subdivision)})).map(e=>{var r;let t=n.e.parts[e],i=(null==t?void 0:null===(r=t.anatomicalName)||void 0===r?void 0:r.split("-"))||[e],l=i.length>1?i[1].trim():(null==t?void 0:t.anatomicalName)||e;return{id:e,labelEs:l}});if(s.length>0){p(s),j({primary:a,side:l}),g(!0);return}let o=null==t?void 0:t.bodyPartEntries[e];d(e),c((null==o?void 0:o.intensityLevel)||5)},v=e=>e?e<=3?"#fef08a":e<=6?"#fed7aa":e<=8?"#fca5a5":"#dc2626":"#e5e7eb";return(0,i.jsxs)("div",{className:"flex flex-col items-center",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold mb-6",children:"front"===r?"Vista Frontal":"Vista Trasera"}),(0,i.jsx)("div",{className:"relative w-full flex justify-center",children:(0,i.jsxs)("svg",{viewBox:"0 0 300 430",className:"w-full max-w-xs h-auto",style:{aspectRatio:"300/430"},children:["front"===r?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"150",cy:"40",r:"25",fill:"#f3f4f6",stroke:"#9ca3af",strokeWidth:"2"}),(0,i.jsx)("rect",{x:"140",y:"65",width:"20",height:"15",fill:"#f3f4f6",stroke:"#9ca3af",strokeWidth:"2"}),(0,i.jsx)("path",{d:"M 120 85 L 80 130 L 90 200 L 120 220 L 150 220 L 180 220 L 210 200 L 220 130 L 180 85 Z",fill:"#f3f4f6",stroke:"#9ca3af",strokeWidth:"2"}),(0,i.jsx)("path",{d:"M 80 95 Q 50 120 40 200",stroke:"#9ca3af",strokeWidth:"16",fill:"none",strokeLinecap:"round"}),(0,i.jsx)("path",{d:"M 220 95 Q 250 120 260 200",stroke:"#9ca3af",strokeWidth:"16",fill:"none",strokeLinecap:"round"}),(0,i.jsx)("path",{d:"M 130 220 L 110 320 L 110 405",stroke:"#9ca3af",strokeWidth:"18",fill:"none",strokeLinecap:"round"}),(0,i.jsx)("path",{d:"M 170 220 L 190 320 L 190 405",stroke:"#9ca3af",strokeWidth:"18",fill:"none",strokeLinecap:"round"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"150",cy:"40",r:"25",fill:"#f3f4f6",stroke:"#9ca3af",strokeWidth:"2"}),(0,i.jsx)("rect",{x:"140",y:"65",width:"20",height:"15",fill:"#f3f4f6",stroke:"#9ca3af",strokeWidth:"2"}),(0,i.jsx)("path",{d:"M 120 85 L 80 130 L 90 200 L 120 230 L 150 240 L 180 230 L 210 200 L 220 130 L 180 85 Z",fill:"#f3f4f6",stroke:"#9ca3af",strokeWidth:"2"}),(0,i.jsx)("path",{d:"M 80 95 Q 50 120 40 200",stroke:"#9ca3af",strokeWidth:"16",fill:"none",strokeLinecap:"round"}),(0,i.jsx)("path",{d:"M 220 95 Q 250 120 260 200",stroke:"#9ca3af",strokeWidth:"16",fill:"none",strokeLinecap:"round"}),(0,i.jsx)("path",{d:"M 130 235 L 110 330 L 110 405",stroke:"#9ca3af",strokeWidth:"18",fill:"none",strokeLinecap:"round"}),(0,i.jsx)("path",{d:"M 170 235 L 190 330 L 190 405",stroke:"#9ca3af",strokeWidth:"18",fill:"none",strokeLinecap:"round"})]}),("front"===r?u:_).map(e=>{var r;let l;if(null==t?void 0:t.bodyPartEntries){let r=[];for(let[i,l]of Object.entries(t.bodyPartEntries))(!i.includes("_")||i.split("_").length<3?i:({shoulder_left_superior:"left_shoulder",shoulder_left_inferior:"left_deltoid",shoulder_right_superior:"right_shoulder",shoulder_right_inferior:"right_deltoid",arm_left_proximal:"left_bicep",arm_left_distal:"left_bicep",arm_right_proximal:"right_bicep",arm_right_distal:"right_bicep",forearm_left_anterolateral:"left_forearm",forearm_left_posterolateral:"left_forearm",forearm_right_anterolateral:"right_forearm",forearm_right_posterolateral:"right_forearm",hand_left_palma:"left_hand",hand_left_dorso:"left_hand",hand_right_palma:"right_hand",hand_right_dorso:"right_hand",thigh_left_anterior:"left_thigh",thigh_left_posterior:"left_thigh",thigh_right_anterior:"right_thigh",thigh_right_posterior:"right_thigh",knee_left_lateral:"left_knee",knee_left_medial:"left_knee",knee_right_lateral:"right_knee",knee_right_medial:"right_knee",shin_left_anterior:"left_shin",shin_left_posterior:"left_shin",shin_right_anterior:"right_shin",shin_right_posterior:"right_shin",foot_left_dorso:"left_foot",foot_left_planta:"left_foot",foot_right_dorso:"right_foot",foot_right_planta:"right_foot",ankle_left_anterolateral:"left_foot",ankle_left_posterolateral:"left_foot",ankle_right_anterolateral:"right_foot",ankle_right_posterolateral:"right_foot",dorsal_left_superior:"upper_back",dorsal_left_inferior:"mid_back",dorsal_right_superior:"upper_back",dorsal_right_inferior:"mid_back",lumbar_left_superior:"lower_back",lumbar_left_inferior:"lower_back",lumbar_right_superior:"lower_back",lumbar_right_inferior:"lower_back",gluteal_left_superior:"left_glute",gluteal_left_inferior:"left_glute",gluteal_right_superior:"right_glute",gluteal_right_inferior:"right_glute",neck_left_anterior:"neck",neck_left_posterior:"neck",neck_right_anterior:"neck",neck_right_posterior:"neck",sacroiliac_left_superior:"left_hip",sacroiliac_left_inferior:"left_hip",sacroiliac_right_superior:"right_hip",sacroiliac_right_inferior:"right_hip",groin_left_medial:"left_hip",groin_left_lateral:"left_hip",groin_right_medial:"right_hip",groin_right_lateral:"right_hip",chest_left_superior:"chest",chest_left_inferior:"chest",chest_right_superior:"chest",chest_right_inferior:"chest",abdomen_left_superior:"abdomen",abdomen_left_inferior:"abdomen",abdomen_right_superior:"abdomen",abdomen_right_inferior:"abdomen"})[i]||i)===e.id&&r.push(l.intensityLevel);r.length>0&&(l=Math.max(...r))}let a=v(l),d=s===e.id;return(0,i.jsxs)("g",{style:{cursor:"pointer"},children:[(0,i.jsx)("circle",{cx:e.x,cy:e.y,r:e.radius,fill:a,stroke:d?"#1f2937":"#6b7280",strokeWidth:d?4:2,className:"transition-all hover:opacity-80",onClick:()=>k(e.id)}),(0,i.jsx)("title",{children:(null===(r=x.p.parts[e.id])||void 0===r?void 0:r.anatomicalName)||e.id})]},e.id)})]})}),(0,i.jsxs)("div",{className:"mt-6 grid grid-cols-2 sm:grid-cols-4 gap-3 w-full max-w-xs",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("div",{className:"w-4 h-4 rounded-full bg-yellow-200 border border-gray-400"}),(0,i.jsx)("span",{className:"text-xs",children:"Leve (1-3)"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("div",{className:"w-4 h-4 rounded-full bg-orange-200 border border-gray-400"}),(0,i.jsx)("span",{className:"text-xs",children:"Moderado (4-6)"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("div",{className:"w-4 h-4 rounded-full bg-red-200 border border-gray-400"}),(0,i.jsx)("span",{className:"text-xs",children:"Severo (7-8)"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("div",{className:"w-4 h-4 rounded-full bg-red-600 border border-gray-400"}),(0,i.jsx)("span",{className:"text-xs",children:"Muy Severo (9-10)"})]})]}),m&&y&&(0,i.jsx)(f,{primaryRegionId:y.primary,subdivisions:b.map(e=>({id:e.id,labelEs:e.labelEs})),onSelect:e=>{let r=null==t?void 0:t.bodyPartEntries[e];d(e),c((null==r?void 0:r.intensityLevel)||5),g(!1),j(null)},onCancel:()=>{g(!1),j(null)}}),s&&(0,i.jsx)(h,{value:o,onChange:c,onConfirm:()=>{s&&(a(s,o),d(null))},onCancel:()=>{d(null)},regionId:s})]})}function g(){let{getTodayEntry:e,recordPain:r,loading:a,error:h,clearError:f}=(0,d.T)(),[x,u]=(0,l.useState)("front"),[_,g]=(0,l.useState)(null),b=e(),p=(0,o.TS)(),y=(0,o._f)(p);return a?(0,i.jsx)("main",{className:"min-h-screen flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600 mx-auto mb-4"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Cargando rastreador de dolor..."})]})}):(0,i.jsx)("main",{className:"min-h-screen py-8",children:(0,i.jsxs)("div",{className:"max-w-4xl mx-auto px-4",children:[(0,i.jsxs)("div",{className:"mb-8",children:[(0,i.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-gray-800 mb-2",children:"Rastreador de Dolor Corporal"}),(0,i.jsxs)("p",{className:"text-gray-600",children:["Registrando dolor para ",(0,i.jsx)("span",{className:"font-semibold",children:y})]})]}),(h||_)&&(0,i.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3 animate-fade-in",children:[(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("h3",{className:"font-semibold text-red-800 mb-1",children:"Error"}),(0,i.jsx)("p",{className:"text-red-700 text-sm",children:h||_})]}),(0,i.jsx)("button",{onClick:()=>{g(null),f()},className:"text-red-600 hover:text-red-800 font-bold ml-2","aria-label":"Descartar error",children:"âœ•"})]}),(0,i.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-8",children:(0,i.jsx)("p",{className:"text-blue-900",children:"Haz clic en las partes del cuerpo para registrar tus niveles de dolor. Usa el deslizador para calificar la intensidad de 1 (leve) a 10 (severo)."})}),(0,i.jsxs)("div",{className:"flex gap-2 mb-8 border-b border-gray-300",children:[(0,i.jsx)("button",{onClick:()=>u("front"),className:"px-6 py-3 font-semibold transition ".concat("front"===x?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-800"),"aria-selected":"front"===x,role:"tab",children:"Vista Frontal"}),(0,i.jsx)("button",{onClick:()=>u("back"),className:"px-6 py-3 font-semibold transition ".concat("back"===x?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-800"),"aria-selected":"back"===x,role:"tab",children:"Vista Trasera"})]}),(0,i.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-8 mb-8",children:(0,i.jsx)(m,{location:x,painEntry:b||void 0,onBodyPartSelected:(e,t)=>{try{g(null),r(e,t)}catch(e){g(e instanceof Error?e.message:"Failed to record pain")}}})}),b&&Object.keys(b.bodyPartEntries).length>0&&(0,i.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 mb-8",children:[(0,i.jsxs)("h2",{className:"font-semibold text-green-900 mb-4",children:["Registros de Hoy: ",Object.keys(b.bodyPartEntries).length]}),(0,i.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2",children:Object.entries(b.bodyPartEntries).map(e=>{let[r,l]=e,a=n.e.parts[r],s=t(1725).p.parts[r],d=(null==a?void 0:a.abbreviation)||(null==a?void 0:a.anatomicalName)||(null==s?void 0:s.abbreviation)||c(r);return(0,i.jsxs)("div",{className:"p-3 rounded bg-white border border-green-200",children:[(0,i.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:d}),(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:[l.intensityLevel,"/10"]})]},r)})})]}),(0,i.jsxs)("div",{className:"flex gap-4 justify-center",children:[(0,i.jsx)(s(),{href:"/statistics",className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-semibold",children:"Ver Estad\xedsticas"}),(0,i.jsx)(s(),{href:"/history",className:"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition font-semibold",children:"Ver Historial"})]})]})})}}},function(e){e.O(0,[664,213,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);